"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5932],{55433:function(F,T,n){n.d(T,{r:function(){return v}});var d=n(32735),g=n(60216),C=n.n(g),k=n(74506),R=n(72850);function I(D,L,y){if(!D||!L)return{display:"none"};const{x:O,y:S}=y;return{transform:`translate(${O}px, ${S}px)`}}function v({renderItem:D}){const{itemType:L,isDragging:y,item:O,initialOffset:S,currentOffset:b,mouseOffset:U}=(0,k.useDragLayer)(A=>({item:A.getItem(),itemType:A.getItemType(),initialOffset:A.getInitialSourceClientOffset(),currentOffset:A.getSourceClientOffset(),isDragging:A.isDragging(),mouseOffset:A.getClientOffset()}));return y?d.createElement(R.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},d.createElement(R.x,{style:I(S,b,U)},D({type:L,item:O}))):null}v.propTypes={renderItem:C().func.isRequired}},73386:function(F,T,n){var d=n(32735);const g=(0,d.createContext)();var C=null},56327:function(F,T,n){n.d(T,{PL:function(){return R},Y9:function(){return o.Y},zE:function(){return z},Ky:function(){return ce},fi:function(){return Y},zH:function(){return u},r5:function(){return fe}});var d=n(32735),g=n(15062),C=n(70031),R=()=>{const r=(0,g.v9)(C.Z),e=(0,d.useCallback)(t=>r?.components?.[t]??{},[r]);return{...r,getComponentLayout:e}},I=n(84306),v=n(69262),D=n(99381),L=n.n(D),y=n(33795),O=n.n(y),S=n(3040),b=n.n(S),U=n(51375);const A=(r,e)=>e.find(t=>t.uid===r),w=(r,e)=>{const t=K(r,e),i=$(t.contentType,e),c=H(t.contentType,t.components);return b()(t,["contentType","layouts","edit"],i),b()(t,["contentType","layouts","list"],c),Object.keys(t.components).forEach(a=>{const m=$(t.components[a],e);b()(t,["components",a,"layouts","edit"],m)}),t},K=(r,e)=>{const t=(0,U.w8)(L()(r),e,"contentType"),{components:i,contentType:c}=t,a=m=>Object.keys(m.metadatas).reduce((E,P)=>{const M=O()(m,["attributes",P],{});let x=m.metadatas[P];if(M.type==="relation"){const me=A(M.targetModel,e),N=x.edit.mainField,_={name:N,schema:O()(me,["attributes",N])};x={list:{...x.list,mainField:_},edit:{...x.edit,mainField:_}}}return E[P]=x,E},{});return b()(t,["contentType","metadatas"],a(c)),Object.keys(i).forEach(m=>{const E=i[m],P=a(E);b()(t,["components",m,"metadatas"],P)}),t},$=(r,e)=>r.layouts.edit.reduce((t,i)=>{const c=i.map(a=>{const m=O()(r,["attributes",a.name],{}),E={...a,fieldSchema:m,metadatas:O()(r,["metadatas",a.name,"edit"],{})};if(m.type==="relation"){const M=A(m.targetModel,e).pluginOptions||{};b()(E,"targetModelPluginOptions",M),b()(E,"queryInfos",{shouldDisplayRelationLink:ne(r,a.name,e)})}return E});return t.push(c),t},[]),H=(r,e)=>r.layouts.list.reduce((i,c)=>{const a=O()(r,["attributes",c],{}),m=O()(r,["metadatas",c,"list"],{}),E=a.type;if(E==="relation")return i.push({key:`__${c}_key__`,name:c,fieldSchema:a,metadatas:m}),i;if(E==="component"){const P=e[a.component],M=P.settings.mainField,x=P.attributes[M];return i.push({key:`__${c}_key__`,name:c,fieldSchema:a,metadatas:{...m,mainField:{...x,name:M}}}),i}return i.push({key:`__${c}_key__`,name:c,fieldSchema:a,metadatas:m}),i},[]),ne=(r,e,t)=>{const i=O()(r,["attributes",e,"targetModel"],"");return J(t).includes(i)},J=r=>r.filter(e=>e.isDisplayed).map(({uid:e})=>e);var Q=w,V=n(97889);const W={error:null,isLoading:!0,layout:{},layouts:{}};var G=(r,e)=>(0,V.ZP)(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.error=null,t.layout={};break}case"GET_DATA_SUCCEEDED":{const i=e.data.contentType.uid;t.layout=e.data,t.layouts[i]=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1,t.error=e.error;break}case"SET_LAYOUT_FROM_STATE":{t.error=null,t.layout=r.layouts[e.uid];break}case"UPDATE_LAYOUT":{const i=r.layout;t.layout={...i,contentType:{uid:i.contentType.uid,...e.newLayout.contentType}},t.layouts[i.contentType.uid]={...i,contentType:{uid:i.contentType.uid,...e.newLayout.contentType}};break}default:return t}}),j=n(42882),z=r=>{const[{error:e,isLoading:t,layout:i,layouts:c},a]=(0,d.useReducer)(G,W),m=(0,d.useMemo)(j.Vo,[]),{schemas:E}=(0,g.v9)(N=>m(N),g.wU),P=(0,d.useRef)(!0),{get:M}=(0,v.kY)(),x=(0,d.useCallback)(async(N,_)=>{if(c[N]){a({type:"SET_LAYOUT_FROM_STATE",uid:N});return}a({type:"GET_DATA"});try{const{data:{data:te}}=await M(`/content-manager/content-types/${N}/configuration`,{cancelToken:_.token});a({type:"GET_DATA_SUCCEEDED",data:Q(te,E)})}catch(te){if(I.default.isCancel(te))return;P.current&&console.error(te),P.current&&a({type:"GET_DATA_ERROR",error:te})}},[c,E,M]);(0,d.useEffect)(()=>()=>{P.current=!1},[]),(0,d.useEffect)(()=>{const _=I.default.CancelToken.source();return x(r,_),()=>{_.cancel("Operation canceled by the user.")}},[r,x]);const me=(0,d.useCallback)(N=>{a({type:"UPDATE_LAYOUT",newLayout:Q(N,E)})},[E]);return{error:e,isLoading:t,layout:i,updateLayout:me}},X=r=>r["content-manager_app"].collectionTypeLinks,Z=n(33348),se=n(85973),ye=n.n(se);const oe=(r,e)=>Object.keys(r).reduce((t,i)=>{const c=r[i],a=O()(e,[i],c);return ye()(c)?{...t,[i]:oe(c,a)}:(t[i]=a,t)},{});var ge=(r,e,t)=>{const i=r.find(({to:x})=>x.includes(e));if(!i)return"/";const{to:c,search:a}=i,m=(0,Z.parse)(a),E=(0,Z.parse)(t.substring(1)),P=oe(m,E);return`${c}?${(0,Z.stringify)(P,{encode:!1})}`},ce=r=>{const[{rawQuery:e}]=(0,v.Kx)(),t=(0,g.v9)(X);return ge(t,r,e)},le=n(53038),Y=()=>{const{search:r}=(0,le.TH)(),e=r?(0,Z.parse)(r.substring(1)):{};return e.plugins?(0,Z.stringify)({plugins:e.plugins},{encode:!1}):""},ie=n(89334);const B=(r,e,t)=>({type:ie.m,permissions:r,__meta__:{plugins:e,containerName:t}}),h=()=>({type:ie.Q}),ee=r=>r["content-manager_rbacManager"].permissions,de=r=>r.rbacProvider.collectionTypesRelatedPermissions;var fe=(r,e,t="listView")=>{const i=(0,g.v9)(de),c=(0,g.v9)(ee),a=(0,g.I0)(),m=i[e];return(0,d.useEffect)(()=>m?(a(B(m,r?r.plugins:null,t)),()=>{a(h())}):()=>{},[m,a,r,t]),c},Te=n(73386);const s=()=>useContext(WysiwygContext);var l=null;const u=r=>{const e=(0,d.useRef)();return(0,d.useEffect)(()=>{e.current=r},[r]),e.current};var o=n(90553),f=n(18777)},90553:function(F,T,n){n.d(T,{Y:function(){return R}});var d=n(32735),g=n(74506),C=n.n(g),k=n(18777);const R=(I,{type:v="STRAPI_DND",index:D,item:L={},onStart:y,onEnd:O,onGrabItem:S,onDropItem:b,onCancel:U,onMoveItem:A,dropSensitivity:w="regular"})=>{const K=(0,d.useRef)(null),[{handlerId:$},H]=(0,g.useDrop)({accept:v,collect(W){return{handlerId:W.getHandlerId()}},hover(W,re){if(!K.current)return;const G=W.index,j=D;if(G!==j){if(w==="regular"){const q=K.current.getBoundingClientRect(),z=(q.bottom-q.top)/2,X=re.getClientOffset().y-q.top;if(G<j&&X<z||G>j&&X>z)return}A(j,G),W.index=j}}}),[{isDragging:ne},J,Q]=(0,g.useDrag)({type:v,item(){y&&y();const{width:W}=K.current?.getBoundingClientRect()??{};return{index:D,width:W,...L}},end(){O&&O()},canDrag:I,isDragging:L.id?W=>L.id===W.getItem().id:void 0,collect:W=>({isDragging:W.isDragging()})}),V=(0,k.A)(I,D,{onGrabItem:S,onDropItem:b,onCancel:U,onMoveItem:A});return[{handlerId:$,isDragging:ne,handleKeyDown:V},K,H,J,Q]}},18777:function(F,T,n){n.d(T,{A:function(){return g}});var d=n(32735);const g=(C,k,{onCancel:R,onDropItem:I,onGrabItem:v,onMoveItem:D})=>{const[L,y]=(0,d.useState)(!1),O=A=>{L&&(A==="UP"?D(k-1,k):A==="DOWN"&&D(k+1,k))},S=()=>{L?(I&&I(k),y(!1)):(v&&v(k),y(!0))},b=()=>{L&&(y(!1),R&&R(k))};return A=>{if(C&&!(A.key==="Tab"&&!L))switch(A.preventDefault(),A.key){case" ":case"Enter":S();break;case"Escape":b();break;case"ArrowDown":case"ArrowRight":O("DOWN");break;case"ArrowUp":case"ArrowLeft":O("UP");break;default:}}}},42882:function(F,T,n){n.d(T,{Jg:function(){return D},KQ:function(){return I},Vo:function(){return v},Yg:function(){return C}});var d=n(98178),g=n(34947);const C=()=>y=>y["content-manager_app"]||g.E,k=()=>createSelector(C(),y=>y),R=()=>createSelector(C(),y=>y.models),I=()=>(0,d.P1)(C(),y=>({collectionTypeLinks:y.collectionTypeLinks,singleTypeLinks:y.singleTypeLinks})),v=()=>(0,d.P1)(C(),({components:y,models:O})=>({schemas:[...y,...O]})),D=(0,d.P1)(C(),y=>y.fieldSizes);var L=null},70031:function(F,T){const n=d=>d["content-manager_editViewLayoutManager"].currentLayout;T.Z=n},25708:function(F,T){T.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},47510:function(F,T){const n=d=>`content-manager.${d}`;T.Z=n},51375:function(F,T,n){n.d(T,{_Q:function(){return X.Z},W3:function(){return k},ko:function(){return D},FE:function(){return y},Di:function(){return U},Ex:function(){return Te},du:function(){return $},TA:function(){return J},Ts:function(){return re},Uo:function(){return j},IF:function(){return z},OB:function(){return ue.Z},w8:function(){return oe},kc:function(){return pe}});var d=n(99381),g=n.n(d),k=(s,l,u)=>{if(Array.isArray(s)&&l>=0&&u>=0&&l<=s.length-1&&u<=s.length-1){const o=g()(s),f=o.splice(l,1);return o.splice(u,0,f[0]),o}return s},R=n(59578),I=n.n(R),D=s=>{const l=s.type;return l==="relation"?!I()(s.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(l)&&!!l};const L=(s,l)=>{typeof s=="function"?s(l):s!=null&&(s.current=l)},y=(...s)=>l=>s.forEach(u=>L(u,l));var O=n(33795),S=n.n(O);const b=(s,l)=>Object.keys(s).reduce((u,o)=>{const f=S()(s,[o],{}),{default:r,component:e,type:t,required:i,min:c,repeatable:a}=f;if(r!==void 0&&(u[o]=r),t==="component"){const m=l?.[e]?.attributes??{},E=b(m,l);if(i===!0&&(u[o]=a===!0?[]:E),c&&a===!0&&i){u[o]=[];for(let P=0;P<c;P+=1)u[o].push(E)}}return t==="dynamiczone"&&i===!0&&(u[o]=[]),u},{});var U=b,A=n(9086),w=n.n(A),$=({layouts:s,metadatas:l,...u})=>{const o=s.list.map(e=>e.name?e.name:e),f=Object.keys(l).reduce((e,t)=>{const i=S()(l,[t],{});let c=i.edit;return c.mainField&&(c={...c,mainField:i.edit.mainField.name}),{...e,[t]:{edit:c,list:w()(i.list,["mainField"])}}},{}),r=s.edit.map(e=>e.map(({name:t,size:i})=>({name:t,size:i})));return{...u,layouts:{edit:r,list:o},metadatas:f}};const H=(s,l)=>s.map(u=>({...u,subject:l}));var J=s=>{const l={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(l).reduce((u,o)=>(u[o]=H(l[o],s),u),{})},Q=n(95919),V=n.n(Q),re=s=>s.split(".").filter(l=>V()(parseInt(l,10))),j=s=>{if(s.length===0)return-1;const l=Math.max.apply(Math,s.map(u=>u.__temp_key__??0));return Number.isNaN(l)?-1:l},z=s=>`/content-manager/${s}`,ue=n(47510),X=n(25708),Z=n(3040),se=n.n(Z),oe=(s,l,u)=>{const o=t=>l.find(i=>i.uid===t),f=Object.assign({},s),r=s[u].uid,e=o(r);return se()(f,[u],{...s[u],...e}),Object.keys(s.components).forEach(t=>{const i=o(t);se()(f,["components",t],{...s.components[t],...i})}),f},p=n(69262),pe=(s,l,u)=>{const o=(f,r)=>Object.keys(f).reduce((e,t)=>{const i=(0,p.UN)(r,t),c=S()(f,t),a=(0,p.k2)(r,[t,"component"]),m=(0,p.k2)(r,[t,"repeatable"]);return i==="dynamiczone"?(e[t]=c.map(E=>o(E,u[E.__component])),e):i==="component"?(m?e[t]=c&&c.map(E=>o(E,u[a])):e[t]=c&&o(c,u[a]),e):(i!=="password"&&(e[t]=c),e)},{});return o(s,l)},ce=n(51355),le=n.n(ce),Ee=n(86834),Y=n.n(Ee),ie=n(78746),B=n.n(ie),h=n(24346),ee=n(82293);h.kM(h.nK,"defined",function(){return this.test("defined",p.I0.required,s=>s!==void 0)}),h.kM(h.IX,"notEmptyMin",function(s){return this.test("notEmptyMin",p.I0.min,l=>Y()(l)?!0:l.length>=s)}),h.kM(h.Z_,"isInferior",function(s,l){return this.test("isInferior",s,function(u){return!u||Number.isNaN(B()(u))?!0:B()(l)>=B()(u)})}),h.kM(h.Z_,"isSuperior",function(s,l){return this.test("isSuperior",s,function(u){return!u||Number.isNaN(B()(u))?!0:B()(u)>=B()(l)})});const de=s=>S()(s,["attributes"],{}),ae=(s,{components:l},u={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=de(s);return h.Ry().shape(Object.keys(o).reduce((f,r)=>{const e=o[r];if(e.type!=="relation"&&e.type!=="component"&&e.type!=="dynamiczone"){const t=fe(e.type,e,u);f[r]=t}if(e.type==="relation"&&(f[r]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(e.relationType)?h.Ry().nullable():h.IX().nullable()),e.type==="component"){const t=ae(l[e.component],{components:l},{...u,isFromComponent:!0});if(e.repeatable===!0){const{min:c,max:a,required:m}=e;let E=h.Vo(P=>{let M=h.IX().of(t);return c?m?M=M.min(c,p.I0.min):m!==!0&&Y()(P)?M=M.nullable():M=M.min(c,p.I0.min):m&&!u.isDraft&&(M=M.min(1,p.I0.required)),a&&(M=M.max(a,p.I0.max)),M});return f[r]=E,f}const i=h.Vo(c=>c!==void 0?e.required===!0&&!u.isDraft?t.defined():t.nullable():e.required===!0?h.Ry().defined():h.Ry().nullable());return f[r]=i,f}if(e.type==="dynamiczone"){let t=h.IX().of(h.Vo(({__component:a})=>ae(l[a],{components:l},{...u,isFromComponent:!0})));const{max:i,min:c}=e;c?e.required?t=t.test("min",p.I0.min,a=>u.isCreatingEntry?a&&a.length>=c:a===void 0?!0:a!==null&&a.length>=c).test("required",p.I0.required,a=>u.isCreatingEntry?a!==null||a!==void 0:a===void 0?!0:a!==null):t=t.notEmptyMin(c):e.required&&!u.isDraft&&(t=t.test("required",p.I0.required,a=>u.isCreatingEntry?a!==null||a!==void 0:a===void 0?!0:a!==null)),i&&(t=t.max(i,p.I0.max)),f[r]=t}return f},{}))},fe=(s,l,u)=>{let o=h.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(s)&&(o=h.Z_()),s==="json"&&(o=h.nK(p.I0.json).test("isJSON",p.I0.json,f=>{if(!f||!f.length)return!0;try{return JSON.parse(f),!0}catch{return!1}}).nullable().test("required",p.I0.required,f=>!(l.required&&(!f||!f.length)))),s==="email"&&(o=o.email(p.I0.email)),["number","integer","float","decimal"].includes(s)&&(o=h.Rx().transform(f=>V()(f)?void 0:f).typeError()),s==="biginteger"&&(o=h.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(s)&&(o=h.hT()),Object.keys(l).forEach(f=>{const r=l[f];if(r||!le()(r)&&Number.isInteger(Math.floor(r))||r===0)switch(f){case"required":{u.isDraft||(s==="password"&&u.isCreatingEntry&&(o=o.required(p.I0.required)),s!=="password"&&(u.isCreatingEntry?o=o.required(p.I0.required):o=o.test("required",p.I0.required,e=>e===void 0&&!u.isFromComponent?!0:(0,ee.Z)(s)?e===0?!0:!!e:s==="boolean"?e!=null:s==="date"||s==="datetime"?typeof e=="string"?!Y()(e):!Y()(e?.toString()):!Y()(e))));break}case"max":{s==="biginteger"?o=o.isInferior(p.I0.max,r):o=o.max(r,p.I0.max);break}case"maxLength":o=o.max(r,p.I0.maxLength);break;case"min":{s==="biginteger"?o=o.isSuperior(p.I0.min,r):o=o.min(r,p.I0.min);break}case"minLength":{u.isDraft||(o=o.min(r,p.I0.minLength));break}case"regex":o=o.matches(new RegExp(r),{message:p.I0.regex,excludeEmptyString:!l.required});break;case"lowercase":["text","textarea","email","string"].includes(s)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(s)&&(o=o.strict().uppercase());break;case"positive":(0,ee.Z)(s)&&(o=o.positive());break;case"negative":(0,ee.Z)(s)&&(o=o.negative());break;default:o=o.nullable()}}),o};var Te=ae},82293:function(F,T,n){n.d(T,{Z:function(){return d}});function d(g){return["integer","biginteger","decimal","float","number"].includes(g)}},61937:function(F,T,n){n.d(T,{$k:function(){return v},FT:function(){return L},Nj:function(){return I},Ot:function(){return R},QM:function(){return C},lv:function(){return D},sN:function(){return g},uL:function(){return y},x4:function(){return k}});var d=n(12301);const g="settings_review-workflows",C="Settings/Review_Workflows/SET_WORKFLOWS",k="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",R="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",I="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",D={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},L=d.W.colors.primary600,y={STAGE:"stage"}},67350:function(F,T,n){n.d(T,{n:function(){return R}});var d=n(20108),g=n(69262),C=n(33348),k=n.n(C);function R(I={}){const{id:v="",...D}=I,L={populate:"stages"},{get:y}=(0,g.kY)(),O=(0,C.stringify)({...L,...D},{encode:!1}),{data:S,isLoading:b,status:U,refetch:A}=(0,d.useQuery)(["review-workflows","workflows",v],async()=>{try{const{data:{data:K}}=await y(`/admin/review-workflows/workflows/${v}${O?`?${O}`:""}`);return K}catch{return null}});let w=[];return v&&S?w=[S]:Array.isArray(S)&&(w=S),{workflows:w,isLoading:b,status:U,refetch:A}}},54504:function(F,T,n){n.d(T,{k:function(){return C},s:function(){return k}});var d=n(12301),g=n(61937);function C(R){if(!R)return null;const v=Object.entries(d.W.colors).filter(([,D])=>D.toUpperCase()===R.toUpperCase()).reduce((D,[L])=>(g.lv?.[L]&&(D=L),D),null);return v?{themeColorName:v,name:g.lv[v]}:null}function k(){return Object.entries(g.lv).map(([R,I])=>({hex:d.W.colors[R].toUpperCase(),name:I}))}}}]);
