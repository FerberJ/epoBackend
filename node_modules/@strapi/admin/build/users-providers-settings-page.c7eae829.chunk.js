(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[2282],{51509:function(x,p,e){"use strict";e.r(p),e.d(p,{ProvidersPage:function(){return ue},default:function(){return Ze}});var t=e(32735),r=e(67879),n=e(69262),s=e(23973),i=e.n(s),d=e(23940),a=e.n(d),l=e(94638),m=e(96709),b=e(27649),f=e(82055),h=e(17e3),c=e(56755),y=e(33827),P=e(94547),u=e(19786),E=e(49372),R=e(3685),S=e(35658),z=e(50563),V=e(68625),$=e(20108),g=e(24346),O=e(59677);const ne={id:(0,O.OB)("PopUpForm.Providers.redirectURL.front-end.label"),defaultMessage:"The redirect URL to your front-end app"},ae={id:"http://www.client-app.com",defaultMessage:"http://www.client-app.com"},Q={id:(0,O.OB)("PopUpForm.Providers.enabled.description"),defaultMessage:"If disabled, users won't be able to use this provider."},J={id:(0,O.OB)("PopUpForm.Providers.enabled.label"),defaultMessage:"Enable"},re={id:(0,O.OB)("PopUpForm.Providers.key.label"),defaultMessage:"Client ID"},se={id:(0,O.OB)("PopUpForm.Providers.redirectURL.label"),defaultMessage:"The redirect URL to add in your {provider} application configurations"},N={id:(0,O.OB)("PopUpForm.Providers.key.placeholder"),defaultMessage:"TEXT"},ie={id:(0,O.OB)("PopUpForm.Providers.secret.label"),defaultMessage:"Client Secret"};var Y={email:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6}]],schema:g.Ry().shape({enabled:g.Xg().required(n.I0.required)})},providers:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6,validations:{required:!0}}],[{intlLabel:re,name:"key",type:"text",placeholder:N,size:12,validations:{required:!0}}],[{intlLabel:ie,name:"secret",type:"text",placeholder:N,size:12,validations:{required:!0}}],[{intlLabel:ne,placeholder:ae,name:"callback",type:"text",size:12,validations:{required:!0}}],[{intlLabel:se,name:"noName",type:"text",validations:{},size:12,disabled:!0}]],schema:g.Ry().shape({enabled:g.Xg().required(n.I0.required),key:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()}),secret:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()}),callback:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()})})},providersWithSubdomain:{form:[[{intlLabel:J,name:"enabled",type:"bool",description:Q,size:6,validations:{required:!0}}],[{intlLabel:re,name:"key",type:"text",placeholder:N,size:12,validations:{required:!0}}],[{intlLabel:ie,name:"secret",type:"text",placeholder:N,size:12,validations:{required:!0}}],[{intlLabel:{id:(0,O.OB)({id:"PopUpForm.Providers.jwksurl.label"}),defaultMessage:"JWKS URL"},name:"jwksurl",type:"text",placeholder:N,size:12,validations:{required:!1}}],[{intlLabel:{id:(0,O.OB)("PopUpForm.Providers.subdomain.label"),defaultMessage:"Host URI (Subdomain)"},name:"subdomain",type:"text",placeholder:{id:(0,O.OB)("PopUpForm.Providers.subdomain.placeholder"),defaultMessage:"my.subdomain.com"},size:12,validations:{required:!0}}],[{intlLabel:ne,placeholder:ae,name:"callback",type:"text",size:12,validations:{required:!0}}],[{intlLabel:se,name:"noName",type:"text",validations:{},size:12,disabled:!0}]],schema:g.Ry().shape({enabled:g.Xg().required(n.I0.required),key:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()}),secret:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()}),subdomain:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()}),callback:g.Z_().when("enabled",{is:!0,then:g.Z_().required(n.I0.required),otherwise:g.Z_()})})}};const fe=async v=>{try{const{get:B}=(0,n.tg)(),{data:j}=await B((0,O.Gc)("providers"));return j}catch{throw v({type:"warning",message:{id:"notification.error"}}),new Error("error")}},ge=v=>{const{put:B}=(0,n.tg)();return B((0,O.Gc)("providers"),v)};var he=e(98978),ve=e.n(he),pe=v=>ve()(Object.keys(v).reduce((B,j)=>{const{icon:Z,enabled:T,subdomain:D}=v[j],C=Z==="envelope"?["fas","envelope"]:["fab",Z];return D!==void 0?B.push({name:j,icon:C,enabled:T,subdomain:D}):B.push({name:j,icon:C,enabled:T}),B},[]),"name"),oe=e(88369),ye=e(85025),Ee=e(55225),de=e(11299),xe=e(31600),be=e(87933),Pe=e(15335),Me=e(5803),Oe=e(11406),le=e(41415),Be=e(60216),o=e.n(Be),Le=e(92802),Te=e(9139),je=e(10369);const w=({description:v,disabled:B,intlLabel:j,error:Z,name:T,onChange:D,placeholder:C,providerToEditName:I,type:F,value:M})=>{const{formatMessage:U}=(0,r.Z)(),W=T==="noName"?`${window.strapi.backendURL}/api/connect/${I}/callback`:M,K=U({id:j.id,defaultMessage:j.defaultMessage},{provider:I,...j.values}),A=v?U({id:v.id,defaultMessage:v.defaultMessage},{provider:I,...v.values}):"";if(F==="bool")return t.createElement(Te.s,{"aria-label":T,checked:M,disabled:B,hint:A,label:K,name:T,offLabel:U({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:U({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:H=>{D({target:{name:T,value:H.target.checked}})}});const q=C?U({id:C.id,defaultMessage:C.defaultMessage},{...C.values}):"",_=Z?U({id:Z,defaultMessage:Z}):"";return t.createElement(je.o,{"aria-label":T,disabled:B,error:_,label:K,name:T,onChange:D,placeholder:q,type:F,value:W})};w.defaultProps={description:null,disabled:!1,error:"",placeholder:null,value:""},w.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),providerToEditName:o().string.isRequired,type:o().string.isRequired,value:o().oneOfType([o().bool,o().string])};var Re=w;const k=({headerBreadcrumbs:v,initialData:B,isSubmiting:j,layout:Z,isOpen:T,onSubmit:D,onToggle:C,providerToEditName:I})=>{const{formatMessage:F}=(0,r.Z)();return T?t.createElement(ye.P,{onClose:C,labelledBy:"title"},t.createElement(Ee.x,null,t.createElement(de.O,{label:v.join(", ")},v.map(M=>t.createElement(de.$,{key:M},M)))),t.createElement(Le.J9,{onSubmit:M=>D(M),initialValues:B,validationSchema:Z.schema,validateOnChange:!1},({errors:M,handleChange:U,values:W})=>t.createElement(n.l0,null,t.createElement(xe.f,null,t.createElement(be.k,{direction:"column",alignItems:"stretch",gap:1},t.createElement(Pe.r,{gap:5},Z.form.map(K=>K.map(A=>t.createElement(Me.P,{key:A.name,col:A.size,xs:12},t.createElement(Re,{...A,error:M[A.name],onChange:U,value:W[A.name],providerToEditName:I}))))))),t.createElement(Oe.m,{startActions:t.createElement(le.z,{variant:"tertiary",onClick:C,type:"button"},F({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:t.createElement(le.z,{type:"submit",loading:j},F({id:"global.save",defaultMessage:"Save"}))})))):null};k.defaultProps={initialData:null,providerToEditName:null},k.propTypes={headerBreadcrumbs:o().arrayOf(o().string).isRequired,initialData:o().object,layout:o().shape({form:o().arrayOf(o().array),schema:o().object}).isRequired,isOpen:o().bool.isRequired,isSubmiting:o().bool.isRequired,onSubmit:o().func.isRequired,onToggle:o().func.isRequired,providerToEditName:o().string};var Ce=k;const ue=()=>{const{formatMessage:v}=(0,r.Z)();(0,n.go)();const{notifyStatus:B}=(0,l.G)(),j=(0,$.useQueryClient)(),{trackUsage:Z}=(0,n.rS)(),T=(0,t.useRef)(Z),[D,C]=(0,t.useState)(!1),[I,F]=(0,t.useState)(!1),[M,U]=(0,t.useState)(null),W=(0,n.lm)(),{lockApp:K,unlockApp:A}=(0,n.o1)(),q=(0,t.useMemo)(()=>({update:oe.Z.updateProviders}),[]),{isLoading:_,allowedActions:{canUpdate:H}}=(0,n.ss)(q),{isLoading:Ue,data:G,isFetching:Ae}=(0,$.useQuery)("get-providers",()=>fe(W),{onSuccess(){B(v({id:(0,O.OB)("Providers.data.loaded"),defaultMessage:"Providers have been loaded"}))},initialData:{}}),De=Ue||Ae,Fe=(0,$.useMutation)(ge,{async onSuccess(){await j.invalidateQueries("get-providers"),W({type:"info",message:{id:(0,O.OB)("notification.success.submit")}}),T.current("didEditAuthenticationProvider"),F(!1),ee(),A()},onError(){W({type:"warning",message:{id:"notification.error"}}),A(),F(!1)},refetchActive:!1}),X=(0,t.useMemo)(()=>pe(G),[G]),Se=X.length,ce=(0,t.useMemo)(()=>{if(!M)return!1;const L=X.find(te=>te.name===M);return i()(L,"subdomain")},[X,M]),Ie=v({id:(0,O.OB)("HeaderNav.link.providers"),defaultMessage:"Providers"}),We=(0,t.useMemo)(()=>M==="email"?Y.email:ce?Y.providersWithSubdomain:Y.providers,[M,ce]),ee=()=>{C(L=>!L)},me=L=>{H&&(U(L.name),ee())},ze=async L=>{F(!0),K(),T.current("willEditAuthenticationProvider");const te={...G,[M]:L};Fe.mutate({providers:te})};return t.createElement(m.A,null,t.createElement(n.SL,{name:Ie}),t.createElement(b.o,null,t.createElement(f.T,{title:v({id:(0,O.OB)("HeaderNav.link.providers"),defaultMessage:"Providers"})}),De||_?t.createElement(n.dO,null):t.createElement(h.D,null,t.createElement(c.i,{colCount:3,rowCount:Se+1},t.createElement(y.h,null,t.createElement(P.Tr,null,t.createElement(u.Th,null,t.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},v({id:"global.name",defaultMessage:"Name"}))),t.createElement(u.Th,null,t.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},v({id:(0,O.OB)("Providers.status"),defaultMessage:"Status"}))),t.createElement(u.Th,null,t.createElement(E.Z,{variant:"sigma"},t.createElement(R.T,null,v({id:"global.settings",defaultMessage:"Settings"})))))),t.createElement(S.p,null,X.map(L=>t.createElement(P.Tr,{key:L.name,...(0,n.X7)({fn:()=>me(L),condition:H})},t.createElement(u.Td,{width:"45%"},t.createElement(E.Z,{fontWeight:"semiBold",textColor:"neutral800"},L.name)),t.createElement(u.Td,{width:"65%"},t.createElement(E.Z,{textColor:L.enabled?"success600":"danger600","data-testid":`enable-${L.name}`},L.enabled?v({id:"global.enabled",defaultMessage:"Enabled"}):v({id:"global.disabled",defaultMessage:"Disabled"}))),t.createElement(u.Td,{...n.UW},H&&t.createElement(z.h,{onClick:()=>me(L),noBorder:!0,icon:t.createElement(V.Z,null),label:"Edit"})))))))),t.createElement(Ce,{initialData:G[M],isOpen:D,isSubmiting:I,layout:We,headerBreadcrumbs:[v({id:(0,O.OB)("PopUpForm.header.edit.providers"),defaultMessage:"Edit Provider"}),a()(M)],onToggle:ee,onSubmit:ze,providerToEditName:M}))};var Ze=()=>t.createElement(n.O4,{permissions:oe.Z.readProviders},t.createElement(ue,null))},59677:function(x,p,e){"use strict";e.d(p,{YX:function(){return s},Gc:function(){return a},OB:function(){return l.Z}});var t=e(86834),r=e.n(t),s=m=>Object.keys(m).reduce((b,f)=>{const h=m[f].controllers,c=Object.keys(h).reduce((y,P)=>(r()(h[P])||(y[P]=h[P]),y),{});return r()(c)||(b[f]={controllers:c}),b},{}),i=e(90201),a=m=>`/${i.Z}/${m}`,l=e(82069)},56671:function(x,p,e){var t=e(35897),r=e(74741),n=r(t);x.exports=n},52920:function(x,p,e){var t=e(56671),r=e(81580);function n(s,i){var d=-1,a=r(s)?Array(s.length):[];return t(s,function(l,m,b){a[++d]=i(l,m,b)}),a}x.exports=n},50690:function(x,p,e){var t=e(26460),r=e(80166),n=e(88904),s=e(52920),i=e(36024),d=e(76535),a=e(1397),l=e(15362),m=e(77236);function b(f,h,c){h.length?h=t(h,function(u){return m(u)?function(E){return r(E,u.length===1?u[0]:u)}:u}):h=[l];var y=-1;h=t(h,d(n));var P=s(f,function(u,E,R){var S=t(h,function(z){return z(u)});return{criteria:S,index:++y,value:u}});return i(P,function(u,E){return a(u,E,c)})}x.exports=b},36024:function(x){function p(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}x.exports=p},40709:function(x,p,e){var t=e(22945);function r(n,s){if(n!==s){var i=n!==void 0,d=n===null,a=n===n,l=t(n),m=s!==void 0,b=s===null,f=s===s,h=t(s);if(!b&&!h&&!l&&n>s||l&&m&&f&&!b&&!h||d&&m&&f||!i&&f||!a)return 1;if(!d&&!l&&!h&&n<s||h&&i&&a&&!d&&!l||b&&i&&a||!m&&a||!f)return-1}return 0}x.exports=r},1397:function(x,p,e){var t=e(40709);function r(n,s,i){for(var d=-1,a=n.criteria,l=s.criteria,m=a.length,b=i.length;++d<m;){var f=t(a[d],l[d]);if(f){if(d>=b)return f;var h=i[d];return f*(h=="desc"?-1:1)}}return n.index-s.index}x.exports=r},74741:function(x,p,e){var t=e(81580);function r(n,s){return function(i,d){if(i==null)return i;if(!t(i))return n(i,d);for(var a=i.length,l=s?a:-1,m=Object(i);(s?l--:++l<a)&&d(m[l],l,m)!==!1;);return i}}x.exports=r},98978:function(x,p,e){var t=e(40314),r=e(50690),n=e(94569),s=e(63108),i=n(function(d,a){if(d==null)return[];var l=a.length;return l>1&&s(d,a[0],a[1])?a=[]:l>2&&s(a[0],a[1],a[2])&&(a=[a[0]]),r(d,t(a,1),[])});x.exports=i},11299:function(x,p,e){"use strict";e.d(p,{$:function(){return m},O:function(){return b}});var t=e(74512),r=e(77277),n=e(8471),s=e(3685),i=e(87933),d=e(72850),a=e(49372);const l=(0,n.ZP)(i.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:f})=>f.colors.neutral500};
    }
  }
  :last-of-type ${d.x} {
    display: none;
  }
  :last-of-type ${a.Z} {
    color: ${({theme:f})=>f.colors.neutral800};
    font-weight: ${({theme:f})=>f.fontWeights.bold};
  }
`,m=({children:f})=>(0,t.jsxs)(l,{inline:!0,as:"li",children:[(0,t.jsx)(a.Z,{variant:"pi",textColor:"neutral600",children:f}),(0,t.jsx)(d.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3,children:(0,t.jsx)(r.Z,{})})]});m.displayName="Crumb";const b=({children:f,label:h,...c})=>(0,t.jsxs)(i.k,{...c,children:[(0,t.jsx)(s.T,{children:h}),(0,t.jsx)("ol",{"aria-hidden":!0,children:f})]});b.displayName="Breadcrumbs"},17e3:function(x,p,e){"use strict";e.d(p,{D:function(){return n}});var t=e(74512),r=e(72850);const n=({children:s})=>(0,t.jsx)(r.x,{paddingLeft:10,paddingRight:10,children:s})},82055:function(x,p,e){"use strict";e.d(p,{T:function(){return b}});var t=e(74512),r=e(32735),n=e(8471);const s=c=>{const y=(0,r.useRef)(null),[P,u]=(0,r.useState)(!0),E=([R])=>{u(R.isIntersecting)};return(0,r.useEffect)(()=>{const R=y.current,S=new IntersectionObserver(E,c);return R&&S.observe(y.current),()=>{R&&S.disconnect()}},[y,c]),[y,P]};var i=e(63060);const d=(c,y)=>{const P=(0,i.W)(y);(0,r.useLayoutEffect)(()=>{const u=new ResizeObserver(P);return Array.isArray(c)?c.forEach(E=>{E.current&&u.observe(E.current)}):c.current&&u.observe(c.current),()=>{u.disconnect()}},[c,P])};var a=e(72850),l=e(87933),m=e(49372);const b=c=>{const y=(0,r.useRef)(null),[P,u]=(0,r.useState)(null),[E,R]=s({root:null,rootMargin:"0px",threshold:0});return d(E,()=>{E.current&&u(E.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{y.current&&u(y.current.getBoundingClientRect())},[y]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{height:P?.height},ref:E,children:R&&(0,t.jsx)(h,{ref:y,...c})}),!R&&(0,t.jsx)(h,{...c,sticky:!0,width:P?.width})]})};b.displayName="HeaderLayout";const f=(0,n.ZP)(a.x)`
  width: ${({width:c})=>c?`${c/16}rem`:void 0};
  z-index: ${({theme:c})=>c.zIndices[1]};
`,h=r.forwardRef(({navigationAction:c,primaryAction:y,secondaryAction:P,subtitle:u,title:E,sticky:R,width:S,...z},V)=>{const $=typeof u=="string";return R?(0,t.jsx)(f,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:S,"data-strapi-header-sticky":!0,children:(0,t.jsxs)(l.k,{justifyContent:"space-between",children:[(0,t.jsxs)(l.k,{children:[c&&(0,t.jsx)(a.x,{paddingRight:3,children:c}),(0,t.jsxs)(a.x,{children:[(0,t.jsx)(m.Z,{variant:"beta",as:"h1",...z,children:E}),$?(0,t.jsx)(m.Z,{variant:"pi",textColor:"neutral600",children:u}):u]}),P?(0,t.jsx)(a.x,{paddingLeft:4,children:P}):null]}),(0,t.jsx)(l.k,{children:y?(0,t.jsx)(a.x,{paddingLeft:2,children:y}):void 0})]})}):(0,t.jsxs)(a.x,{ref:V,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:c?6:8,background:"neutral100","data-strapi-header":!0,children:[c?(0,t.jsx)(a.x,{paddingBottom:2,children:c}):null,(0,t.jsxs)(l.k,{justifyContent:"space-between",children:[(0,t.jsxs)(l.k,{minWidth:0,children:[(0,t.jsx)(m.Z,{as:"h1",variant:"alpha",...z,children:E}),P?(0,t.jsx)(a.x,{paddingLeft:4,children:P}):null]}),y]}),$?(0,t.jsx)(m.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:u}):u]})})},96709:function(x,p,e){"use strict";e.d(p,{A:function(){return d}});var t=e(74512),r=e(8471),n=e(72850);const s=(0,r.ZP)(n.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:a})=>a?"auto 1fr":"1fr"};
`,i=(0,r.ZP)(n.x)`
  overflow-x: hidden;
`,d=({sideNav:a,children:l})=>(0,t.jsxs)(s,{hasSideNav:!!a,children:[a,(0,t.jsx)(i,{paddingBottom:10,children:l})]})},27649:function(x,p,e){"use strict";e.d(p,{o:function(){return i}});var t=e(74512),r=e(8471),n=e(72850);const s=(0,r.ZP)(n.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,i=({labelledBy:d="main-content-title",...a})=>(0,t.jsx)(s,{"aria-labelledby":d,as:"main",id:"main-content",tabIndex:-1,...a})}}]);
